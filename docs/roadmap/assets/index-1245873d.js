(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();const R="/roadmap/FakeJira.csv";async function N(t){try{return(await fetch(t)).text()}catch(e){throw new Error("Failed to fetch local file: "+e.message)}}const W=await N(R);function D(t){const e={jan:0,feb:1,mar:2,apr:3,may:4,jun:5,jul:6,aug:7,sep:8,oct:9,nov:10,dec:11},o=t.trim().split("/");if(o.length!==3)return null;const s=parseInt(o[0],10),r=e[o[1].toLowerCase()],l=parseInt(o[2],10);return new Date(l+2e3,r,s)}function Y(t){const e=[];let n="",o=!1;for(const s of t)s==='"'?o=!o:s===","&&!o?(e.push(n),n=""):n+=s;return e.push(n),e}const j=W.split(`
`),z=j.slice(1).map(t=>{const e=Y(t);return{Hierachy:e[0],Title:e[1],Project:e[2],Releases:e[3],Team:e[4],Assignee:e[5],Reporter:e[6],Sprint:e[7],TargetStartDate:D(e[8]),TargetEndDate:D(e[9]),DueDate:D(e[10]),Estimates:e[11],Parent:e[12],Priority:e[13],Labels:e[14],Components:e[15],IssueKey:e[16],IssueStatus:e[17],Progress:e[21],ProgressCompleted:e[19],ProgressRemaining:e[20],ProgressIssueCount:e[18],ToDoIC:e[22],InProgressIC:e[23],DoneIC:e[24],TotalIC:e[25],StartDateRollUp:e[26],StartDate:D(e[27])}});function J(t,e){const n=16.66666666666;if(t===null||e===null)return 400;const o=e.getTime()-t.getTime();return Math.floor(o/(24*60*60*1e3))*n}function Q(t,e){const o=_(T(e));if(t===null)return 100;if(o){const r=t.getTime();return(Math.floor(r/864e5)-o)*16.6}}function U(t,e){const n=parseFloat(getComputedStyle(t).marginLeft),o=parseFloat(getComputedStyle(e).marginLeft),s=parseFloat(getComputedStyle(t).width),r=parseFloat(getComputedStyle(e).width),l=10;return o<n+s+l&&l+o+r>n}function w(t,e){return e<30&&(e=30),t.length>e?t.slice(0,e-1)+"...":t}function P(t){if(t){const e=t.getDate(),n=t.toLocaleString("default",{month:"short"}),o=t.getFullYear();return`${e}/${n}/${o}`}return"N/A"}function X(t){const e=T(t),n=G(t);if(e&&n)return Z(e,n)}function T(t){let e=t[0].StartDate;return t.forEach(n=>{n.StartDate&&(e===null||e&&n.StartDate<e)&&(e=n.StartDate)}),e}function G(t){let e=t[0].DueDate;return t.forEach(n=>{n.DueDate&&(e===null||e&&n.DueDate>e)&&(e=n.DueDate)}),e}function Z(t,e){let n=[],o;const s=new Date,r=new Date(t),l=new Date(e),u=2,g=1;for(r.setMonth(t.getMonth()-g-1),l.setMonth(t.getMonth()+u);r<=l;){s.getMonth()===r.getMonth()&&s.getFullYear()===r.getFullYear()?o="var(--bright-blue-500, #6CACE4":s>r?o="var(--green-500, #00993B)":o="var(--grey-200, #6F7376)";const c=`${r.toLocaleString("default",{month:"long"})} ${r.getFullYear()}`;n.push([c,o]),r.setMonth(r.getMonth()+1)}return n}function _(t){if(t){const e=new Date(t);e.setMonth(e.getMonth()-1);const n=24*60*60*1e3,o=e.getTime();return Math.floor(o/n)-13}}const C=document.getElementById("overlay"),i=document.getElementById("modal-container"),O=document.getElementById("jira-link"),L=document.getElementById("close"),S=i.querySelector(".modal-element"),ee=i.querySelector(".title"),B=i.querySelector(".progress-completed-bar"),te=i.querySelector(".progress-bar"),ne=S.querySelector("h2"),oe=document.getElementById("issue-key"),re=document.getElementById("hierarchy"),se=document.getElementById("parent"),le=document.getElementById("due-date"),ae=document.getElementById("start-date"),ie=document.getElementById("team"),ce=document.getElementById("status"),ue=document.getElementById("assignee"),de=document.getElementById("reporter"),ge=document.getElementById("labels");function $(t){t.forEach(e=>{e.addEventListener("click",()=>{const n=e.getAttribute("data-index"),o=e.getAttribute("original-color");if(n!==null){const s=parseInt(n);x==="epics"?k(s,b,o):k(s,E,o)}})})}function k(t,e,n){let o=m.querySelectorAll(".elements");const s=o[t].querySelector("h2"),r=o[t].querySelector(".progress-bar");e[t].DueDate===null&&n!==null?S.style.background=n:(S.style.background="",S.style.backgroundColor=o[t].style.backgroundColor),O.href=`https://infosum.atlassian.net/browse/${e[t].IssueKey}`,ee.textContent=w(`${e[t].IssueKey} --- ${e[t].Title}`,40),B.style.width=`${e[t].Progress}px`,B.style.left=`${parseFloat(r.style.left)+10}px`,te.style.left=`${parseFloat(r.style.left)+10}px`,ne.textContent=s.textContent,oe.textContent=e[t].IssueKey,re.textContent=e[t].Hierachy,se.textContent=w(e[t].Parent,70),le.textContent=P(e[t].DueDate),ae.textContent=P(e[t].StartDate),ie.textContent=e[t].Team,ce.textContent=e[t].IssueStatus,ue.textContent=e[t].Assignee,de.textContent=e[t].Reporter,ge.textContent=e[t].Labels,event?.stopPropagation(),C.style.display="block",i.style.position="fixed",i.style.display="block",window.addEventListener("click",l=>{l.target!==i&&!i.contains(l.target)&&(i.style.display="none",C.style.display="none")}),L?.addEventListener("click",()=>{L&&(i.style.display="none",C.style.display="none")})}function A(t){for(let e=0;e<t.length;e++){const n=document.createElement("button");n.classList.add("elements"),n.setAttribute("data-index",e.toString()),n.innerHTML=`
      <h1 class="title">${t[e].Title}<h1>
      <h2>test text<h2>
      <div class="progress-bar"></div>
      <div class="progress-completed-bar"></div>
      <p>medium</p>
      `;const o=n.querySelector(".progress-completed-bar");o.style.width=`${t[e].Progress}px`,m.appendChild(n);const r=document.querySelector("#app")?.querySelectorAll(".elements"),l=n.querySelector("h2"),u=n.querySelector(".progress-bar");let g=Q(t[e].StartDate,b);if(t[e].StartDate!==null&&t[e].DueDate!==null){let h=J(t[e].StartDate,t[e].DueDate);r[r.length-1].style.width=`${h}px`,r[r.length-1].style.marginLeft=`${g}px`}else t[e].StartDate!==null&&(r[r.length-1].style.width="400px",r[r.length-1].style.marginLeft=`${g}px`);const c=parseFloat(t[e].Progress),I=parseFloat(getComputedStyle(o).left);let y,p,d;switch(console.log("Raw progress string:",c),!0){case c===0:y="var(--grey-200, #6F7376)",p="Planned",d=0,n.setAttribute("id","planned"),n.setAttribute("original-color","var(--grey-200, #6F7376)");break;case(c>0&&c<100):y="var(--bright-blue-400, #578AB7)",p=`${c}% Done`,d=18,n.setAttribute("id","in-progress"),n.setAttribute("original-color","var(--bright-blue-400, #578AB7)");break;case c===100:y="var(--green-500, #00993B)",p="Done",d=-20,n.setAttribute("id","done"),n.setAttribute("original-color","var(--green-500, #00993B)");break;default:y="",p="",d=0;break}if(r[r.length-1].style.backgroundColor=y,l.innerText=p,d!==void 0&&(o.style.left=`${I+d}px`,u.style.left=`${I+d}px`),t[e].DueDate===null){const h=r[r.length-1].style.backgroundColor,K=`linear-gradient(to right, ${h}, ${h}, ${h} ,rgba(0, 0, 0, 0) 100%)`;r[r.length-1].style.background=K}const V=n.querySelector("h1");V.innerText=w(`${t[e].IssueKey} --- ${t[e].Title}`,parseInt(r[r.length-1].style.width)/10-10)}}function me(t){const e=document.querySelector(".months"),n=X(t);if(n)for(let o=0;o<n.length;o++){const s=document.createElement("div");s.classList.add("version-month"),s.innerHTML=`
        <div class="version-title">
          <h5>V 2.${o+1}.0</h5>
          <h6>end of ${n[o][0]}</h6>
        </div>

        <div class="version-month-line"></div>
        `;const r=500,l=s.querySelector(".version-title"),u=l.querySelector("h5");l.style.left=`${o+100+r*o}px`,l.style.color=n[o][1],n[o][1]==="var(--bright-blue-500, #6CACE4"&&(u.textContent="NOW");const g=s.querySelector(".version-month-line");g.style.left=`${o+210+r*o}px`,e.appendChild(s)}}const a=[];for(let t=0;t<100;t++)a.push([]);function M(){a.forEach(e=>e.length=0);let t=m.querySelectorAll(".elements");for(let e of t)parseFloat(getComputedStyle(e).width)<400&&e.style.setProperty("width","400px");for(let e=0;e<t.length;e++)e:for(let n=0;n<a.length;n++){if(a[n].length===0){a[n].push(t[e]);break e}let o=!0;t:for(let s=0;s<a[n].length;s++)if(U(t[e],a[n][s])){o=!1;const r=parseFloat(getComputedStyle(t[e]).top);t[e].style.setProperty("top",`${r+88}px`);break t}if(o){a[n].push(t[e]);break e}}t.forEach(e=>{const n=e.querySelector("p"),o=parseFloat(getComputedStyle(e).width);n&&(n.textContent="test?",n.style.setProperty("left",`${o-82}px`))})}function fe(){for(let t=0;t<a.length;t++)if(a[t].length===0)return t*100>window.innerHeight?t*93:window.innerHeight-103}let x="initiatives",m=document.querySelector("#app");const q=z.filter(t=>t.Project!=="Psyduck"&&t.Hierachy!=="Spike"&&t.StartDate!==null&&t.IssueKey!=="PMB-145"),b=q.filter(t=>t.Hierachy!=="Initiative"),E=q.filter(t=>t.Hierachy!=="Epic"),v=document.getElementById("epic-btn"),f=document.getElementById("initiative-btn");v?.addEventListener("click",()=>{f&&F("epics",v,f,b)});f?.addEventListener("click",()=>{v&&F("initiatives",f,v,E)});function F(t,e,n,o){x=t,m.innerHTML="",A(o),M(),e.style.backgroundColor="var(--bright-blue-500, #6CACE4)",n&&(n.style.backgroundColor="var(--black-300, #424548)");let s=m.querySelectorAll(".elements");$(s);const r=`${fe()?.toString()}px`;console.log(r);let l=document.querySelectorAll(".version-month-line");for(let u of l)u.style.height=r}me(b);A(E);let ye=m.querySelectorAll(".elements");$(ye);f&&(M(),f.style.backgroundColor="var(--bright-blue-500, #6CACE4)");document.addEventListener("keydown",t=>{t.shiftKey&&document.addEventListener("wheel",H)});document.addEventListener("keyup",()=>{document.removeEventListener("wheel",H)});function H(t){t.preventDefault(),window.scrollBy(t.deltaX,0)}const pe=4970;window.scrollTo({top:0,left:pe,behavior:"smooth"});
